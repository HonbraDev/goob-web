---
import type { CollectionEntry } from "astro:content";
import BlogPostingSchema from "../components/BlogPostingSchema.astro";
import HeroImage from "../components/HeroImage.astro";
import dateDMY from "../utils/dateDMY";
import Layout from "./Layout.astro";

type Props = CollectionEntry<"blog">["data"];

const { title, description, pubDate, updatedDate, heroImage, heroAlt } =
  Astro.props;
---

<Layout
  title={title}
  description={description}
  breadcrumbs={[{ text: "Blog", href: "/blog" }]}
  image={heroImage}
>
  <BlogPostingSchema slot="head" {...Astro.props} />
  <article>
    <div class="flex justify-between mb-4">
      <span>{description}</span>
      <div class="flex gap-2">
        <span>Published {dateDMY(pubDate)}</span>
        {
          updatedDate && (
            <>
              <span>&bull;</span>
              <span>Updated {dateDMY(updatedDate)}</span>
            </>
          )
        }
      </div>
    </div>
    {
      heroImage ? (
        <HeroImage src={heroImage} alt={heroAlt} />
      ) : (
        <hr class="mt-4 mb-0" />
      )
    }
    <section id="article-content" class="prose text-white">
      <slot />
    </section>
  </article>
</Layout>
